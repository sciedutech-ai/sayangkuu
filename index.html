<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Waktunya Sahur! üåô</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #1e1b4b; /* Warna gelap cadangan untuk body */
            overflow: hidden;
        }

        @keyframes floatUpRight {
            0% { transform: translate(0, 10vh) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 1; transform: translate(15px, -10vh) rotate(45deg) scale(0.7); }
            50% { transform: translate(-15px, -60vh) rotate(180deg) scale(1); }
            90% { opacity: 1; transform: translate(15px, -100vh) rotate(315deg) scale(1.1); }
            100% { transform: translate(0, -120vh) rotate(360deg) scale(1.2); opacity: 0; }
        }

        @keyframes floatUpLeft {
            0% { transform: translate(0, 10vh) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 1; transform: translate(-15px, -10vh) rotate(-45deg) scale(0.7); }
            50% { transform: translate(15px, -60vh) rotate(-180deg) scale(1); }
            90% { opacity: 1; transform: translate(-15px, -100vh) rotate(-315deg) scale(1.1); }
            100% { transform: translate(0, -120vh) rotate(-360deg) scale(1.2); opacity: 0; }
        }

        .floating-item {
            position: absolute;
            bottom: -60px; /* Mulai dari luar layar bawah agar lebih smooth */
            cursor: pointer;
            user-select: none;
            transition: transform 0.2s;
            padding: 15px; /* Area sentuh HP diperbesar */
            -webkit-tap-highlight-color: transparent; /* Hilangkan efek kotak biru saat ditap di HP */
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .heart-button {
            animation: pulse-soft 2s infinite ease-in-out;
        }

        @keyframes pulse-soft {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>

    <div class="fixed inset-0 w-full h-full bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-700 text-white overflow-hidden" style="touch-action: none; -webkit-user-select: none; user-select: none;">
        
        <div id="stars-container" class="absolute inset-0 pointer-events-none z-0"></div>

        <button onclick="toggleMute()" class="absolute top-4 right-4 z-50 p-3 rounded-full glass-panel hover:bg-white/20 transition-all -webkit-tap-highlight-color-transparent">
            <i id="audio-icon" data-lucide="music" class="text-pink-200"></i>
        </button>

        <div id="intro-screen" class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10 w-full h-full">
            <div class="mb-8 relative">
                <i data-lucide="moon" class="w-24 h-24 text-yellow-200 fill-yellow-200 animate-pulse"></i>
                <i data-lucide="star" class="w-8 h-8 text-yellow-100 fill-yellow-100 absolute -top-2 -right-4 animate-bounce"></i>
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-pink-200 to-yellow-200 drop-shadow-md">
                Waktunya Sahur! üåô
            </h1>
            <p class="text-lg text-pink-100 mb-10 max-w-md">
                Hai sayang... Bangun yuk!<br>Aku punya kejutan kecil buat kamu.
            </p>
            <button onclick="startGame()" class="heart-button px-8 py-4 bg-gradient-to-r from-pink-500 to-rose-400 rounded-full text-xl font-bold flex items-center gap-3 shadow-lg -webkit-tap-highlight-color-transparent outline-none">
                Buka Kejutan <i data-lucide="heart" class="fill-current"></i>
            </button>
        </div>

        <div id="game-screen" class="hidden absolute inset-0 w-full h-full">
            <div class="absolute top-6 left-1/2 -translate-x-1/2 z-20 w-11/12 max-w-md">
                <div class="glass-panel rounded-full p-4 flex flex-col items-center shadow-lg">
                    <span id="score-text" class="text-pink-100 text-sm mb-2 font-semibold">Kumpulkan Energi: 0 / 20</span>
                    <div class="w-full bg-black/30 rounded-full h-3 overflow-hidden relative">
                        <div id="progress-bar" class="absolute left-0 top-0 bg-gradient-to-r from-pink-400 to-rose-500 h-full w-0 transition-all duration-300"></div>
                    </div>
                </div>
            </div>
            <div id="game-area" class="absolute inset-0 w-full h-full overflow-hidden"></div>
            
            <div class="absolute bottom-10 left-0 w-full text-center text-white/60 font-medium text-sm pointer-events-none drop-shadow-md">
                Tap/Klik emoji yang muncul! üëÜ
            </div>
        </div>

        <div id="win-screen" class="hidden absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10 w-full h-full">
            <div class="glass-panel p-8 rounded-3xl max-w-lg shadow-2xl bg-white/10 border border-pink-300/30">
                <i data-lucide="heart" class="w-20 h-20 text-rose-400 mx-auto mb-6 fill-current heart-button drop-shadow-[0_0_15px_rgba(2fb,113,133,0.8)]"></i>
                <h2 class="text-3xl font-bold mb-4 text-white drop-shadow-md">Selamat Sahur, Sayang! ü•∞</h2>
                <div class="space-y-4 text-pink-50 text-base">
                    <p>Makasih ya udah kumpulin cintanya. Hehehe.</p>
                    <p>Sekarang buruan bangun, terus makan sahur yang banyak biar kuat puasanya seharian ya!</p>
                    <p class="font-bold text-xl text-rose-300 pt-2 drop-shadow-md">I Love You More! ‚ù§Ô∏è</p>
                </div>
                <button onclick="location.reload()" class="mt-8 px-6 py-2 rounded-full border border-pink-300/50 hover:bg-pink-300/20 text-sm transition-colors text-pink-100">
                    Main Lagi
                </button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        let score = 0;
        const targetScore = 20;
        let isMuted = false;
        let spawnInterval;
        const emojis = ['‚ù§Ô∏è', 'üíñ', 'üçó', 'üç≥', 'ü•õ', 'üçö', 'ü•û', 'ü•∞'];
        const audio = new Audio('sayangku.mp3');
        audio.loop = true;

        // Render Bintang ke dalam container
        const starsContainer = document.getElementById('stars-container');
        for (let i = 0; i < 30; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3 + 1;
            star.style.width = size + 'px';
            star.style.height = size + 'px';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.opacity = Math.random() * 0.5 + 0.2;
            star.style.animationDuration = (Math.random() * 3 + 2) + 's';
            starsContainer.appendChild(star);
        }

        function toggleMute() {
            isMuted = !isMuted;
            audio.muted = isMuted;
            const icon = document.getElementById('audio-icon');
            icon.setAttribute('data-lucide', isMuted ? 'volume-x' : 'music');
            lucide.createIcons();
        }

        function playPopSound() {
            if (isMuted) return;
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.frequency.setValueAtTime(600, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, ctx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.3, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
                osc.start();
                osc.stop(ctx.currentTime + 0.1);
            } catch(e) { console.log('Audio API tidak didukung'); }
        }

        function startGame() {
            document.getElementById('intro-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            audio.play().catch(() => console.log("Audio dimainkan setelah interaksi."));
            
            spawnInterval = setInterval(createItem, 700);
        }

        function createItem() {
            const area = document.getElementById('game-area');
            const item = document.createElement('div');
            
            const left = Math.random() * 80 + 10;
            const emoji = emojis[Math.floor(Math.random() * emojis.length)];
            const duration = Math.random() * 4 + 6;
            const isRight = Math.random() > 0.5;

            item.className = 'floating-item';
            item.innerHTML = emoji;
            item.style.left = left + '%';
            item.style.fontSize = (Math.random() * 1.5 + 2) + 'rem';
            item.style.animation = `${isRight ? 'floatUpRight' : 'floatUpLeft'} ${duration}s linear forwards`;
            item.style.filter = 'drop-shadow(0 4px 8px rgba(0,0,0,0.4))';

            // Event listener khusus agar tap di HP langsung merespon tanpa delay
            item.addEventListener('touchstart', handleTap, {passive: false});
            item.addEventListener('mousedown', handleTap);

            function handleTap(e) {
                e.preventDefault();
                score++;
                playPopSound();
                updateUI();
                item.remove();
                if (score >= targetScore) winGame();
            }

            area.appendChild(item);
            setTimeout(() => { if(area.contains(item)) item.remove() }, duration * 1000);
        }

        function updateUI() {
            document.getElementById('score-text').innerText = `Kumpulkan Energi: ${score} / ${targetScore}`;
            document.getElementById('progress-bar').style.width = (score / targetScore * 100) + '%';
        }

        function winGame() {
            clearInterval(spawnInterval);
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('win-screen').classList.remove('hidden');
        }
    </script>
</body>
</html>
